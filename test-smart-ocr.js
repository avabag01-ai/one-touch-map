// OCR ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜ (ìµœì¢… ê²€ì¦)

// 1. ì„¤ì •ëœ ë™ ëª©ë¡ (ì•± ì„¤ì • ì‹œë®¬ë ˆì´ì…˜)
const availableDongs = ['ë¬µë™', 'ì¤‘í™”ë™', 'ë§ìš°ë™', 'ì‹ ë‚´ë™', 'ìƒë´‰ë™', 'ë©´ëª©ë™'];

// 2. OCR ì¸ì‹ ê²°ê³¼ë¼ê³  ê°€ì •í•œ "ë‚ ê²ƒì˜ ë°ì´í„°" (ì•…í•„, ì•½ì–´ í¬í•¨)
const rawOcrInputs = [
    "ë¬µ159-20",            // ì •ìƒ (ì¸ì‡„ì²´)
    "ì¤‘. 308 - 83",        // ì†ê¸€ì”¨ (ì , ê³µë°±)
    "ë§ 491-6",            // ì•½ì–´ (í•œ ê¸€ì)
    "ì‹ ë‚´ 227-13",         // ì•½ì–´ (ë‘ ê¸€ì)
    "ìƒë´‰ 77-1",           // ì„¤ì •ì— ìˆëŠ” ë‹¤ë¥¸ ë™
    "ë©´ 8-8",              // ì„¤ì •ì— ìˆëŠ” ë‹¤ë¥¸ ë™ (í•œ ê¸€ì)
    "ì¤‘ 324 . 82",         // í•˜ì´í”ˆ ëŒ€ì‹  ì 
    "ë¬µ 244 100",          // í•˜ì´í”ˆ ëŒ€ì‹  ê³µë°±
];

console.log("=== ğŸ§ª OCR ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸ ===");
console.log(`ì„¤ì •ëœ ë™: ${availableDongs.join(', ')}\n`);

function smartProcess(inputs) {
    // ì •ê·œì‹: (í•œê¸€ 1ê¸€ì ì´ìƒ) + (ì /ê³µë°±) + ìˆ«ì + (êµ¬ë¶„ì) + ìˆ«ì
    // ì•½ì–´ ì¸ì‹ì„ ìœ„í•´ [ê°€-í£]+ ì‚¬ìš©
    const regex = /([ê°€-í£]+)\s*[\.\,]?\s*(\d+)\s*[-\.\,\s]\s*(\d+)/g;

    inputs.forEach(text => {
        // ì „ì²˜ë¦¬ (ì˜¤íƒ€ êµì •)
        let cleanText = text.replace(/[\.\,]/g, ' ').trim(); // ì ì„ ê³µë°±ìœ¼ë¡œ ì¹˜í™˜í•´ë²„ë¦¼ (ë” ìœ ì—°í•˜ê²Œ)

        // ì •ê·œì‹ ë§¤ì¹­ ì‹œë„
        // ì›ë³¸ í…ìŠ¤íŠ¸ë¡œ í…ŒìŠ¤íŠ¸ (ì •ê·œì‹ì´ ë‹¤ ì²˜ë¦¬í•˜ë„ë¡)
        let match;
        // loop reset
        regex.lastIndex = 0;

        while ((match = regex.exec(text)) !== null) {
            const dongPart = match[1]; // "ì¤‘", "ì‹ ë‚´", "ë©´"
            const num1 = match[2];
            const num2 = match[3];

            // ğŸ§  ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ë¡œì§
            const matched = availableDongs.find(d => d.startsWith(dongPart));

            if (matched) {
                console.log(`âœ… [${text}] \tâ¡ï¸ ì¸ì‹: "${dongPart}" -> ë³€í™˜: "${matched}" ${num1}-${num2}`);
            } else {
                console.log(`âŒ [${text}] \tâ¡ï¸ ë§¤ì¹­ ì‹¤íŒ¨ (ì•Œ ìˆ˜ ì—†ëŠ” ë™: ${dongPart})`);
            }
        }
    });
}

smartProcess(rawOcrInputs);
